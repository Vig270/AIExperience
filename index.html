<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIXperience Customer Support</title>
    <script src="newfile.js"></script>

    <style>
        /* Add your CSS styling here */
        /* This is just a basic example, you can style your elements as needed */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            color: #3f0061;
            background-color: #006a91b5; 
        }

        h1 {
            color: #3f0061;
            text-align: center; /* Center-align the h1 element */
        }

        .issue {
            margin-bottom: 20px;
            border: 1px solid #000000;
            padding: 10px;
            border-radius: 5px;
            text-align: center; /* Center-align text within .issue div */
        }

        .issue h2 {
            margin-top: 0;
        }

        .issue input,
        .issue textarea,
        .issue button {
            margin: 5px auto; /* Center-align input, textarea, and button */
            display: block;
        }

        .warning-message {
            background-color: #ffcccc;
            color: #ff0000;
            padding: 10px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>
        <img src="alienx.png" alt="AlienX Logo" width="50" height="50">
        AIXperience Customer Support
        <img src="alienx2.png" alt="AlienX Logo" width="50" height="50">
    </h1> 
    
    <div class="issue">
        <h2>Submit a New Issue</h2>
        <form id="new-issue-form">
            <label for="name">Name:</label>
            <img src="alienx2.png" alt="AlienX Logo" width="50" height="50">
            <input type="text" id="name" name="name"><br>

            <label for="email">Email:</label>
            <img src="alienx.png" alt="AlienX Logo" width="50" height="50">
            <input type="email" id="email" name="email"><br>

            <label for="item">Item:</label>
            <img src="alienx2.png" alt="AlienX Logo" width="50" height="50">
            <input type="text" id="item" name="item"><br>
            
            
            <label for="issue">Issue:</label>
            <img src="alienx.png" alt="AlienX Logo" width="50" height="50">
            <textarea id="issue" name="issue"></textarea><br>

            <button type="button" onclick="submitIssue()">Submit Issue</button>
        </form>
    </div>

    <div class="issue">
        <h2>View Submitted Issues</h2>
        <div id="issues-list"></div>
    </div>

    <script>
        // Array to store submitted issues
        var issues = [];

        // Function to submit a new issue
        function submitIssue() {
            var name = document.getElementById('name').value;
            var email = document.getElementById('email').value;
            var item = document.getElementById('item').value;
            var issue = document.getElementById('issue').value;

            // Create a new issue object
            var newIssue = {
                name: name,
                email: email,
                item: item,
                issue: issue,
                timestamp: Date.now() // Add timestamp to the new issue
            };

            // Add the new issue to the issues array
            issues.push(newIssue);

            // Check for fraud
            checkFraud(newIssue);

            // Display the submitted issues
            displayIssues();
        }

        // Function to check for fraud
        function checkFraud(newIssue) {
            var ISSUE_THRESHOLD = 3; // Threshold for the number of issues per email
            var TIME_FRAME = 7 * 24 * 60 * 60 * 1000; // Time frame in milliseconds (7 days)

            var similarEmailCount = 0;

            // Get the current timestamp
            var currentTime = Date.now();

            // Iterate over previous issues
            for (var i = 0; i < issues.length; i++) {
                var issue = issues[i];

                // Check if the email is the same
                if (issue.email === newIssue.email) {
                    // Check if the issue was submitted within the time frame
                    if (currentTime - issue.timestamp < TIME_FRAME) {
                        similarEmailCount++;
                    }
                }
            }

            // Check if the number of similar emails exceeds the threshold
            if (similarEmailCount > ISSUE_THRESHOLD) {
                // Display warning message
                var warningMessage = document.createElement('div');
                warningMessage.classList.add('warning-message');
                warningMessage.textContent = "Error: A fraud detection has appeared, using same email";
                document.body.appendChild(warningMessage);
            }
        }

        // Function to display the submitted issues
        function displayIssues() {
            var issuesList = document.getElementById('issues-list');
            issuesList.innerHTML = ''; // Clear previous content

            if (issues.length === 0) {
                issuesList.innerHTML = '<p>No issues have been submitted yet.</p>';
            } else {
                for (var i = 0; i < issues.length; i++) {
                    var issue = issues[i];
                    var issueHTML = '<div class="issue">';
                    issueHTML += '<h3>Name: ' + issue.name + '</h3>';
                    issueHTML += '<p>Email: ' + issue.email + '</p>';
                    issueHTML += '<p>Item: ' + issue.item + '</p>';
                    issueHTML += '<p>Issue: ' + issue.issue + '</p>';
                    issueHTML += '</div>';

                    issuesList.innerHTML += issueHTML;
                }
            }
        }
    </script>
</body>
</html>
